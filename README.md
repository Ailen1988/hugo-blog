# hugo-docker-dev
Docker image for [Hugo](https://gohugo.io/) development environment.

You can build static sites generated by Hugo with this docker image. The development environment dependencies are defined in the docker image, and the site's files and data are stored in local disk in the host. Any changes in the directory will be directly reflected in the static sites.

The directory structure of the site is as following:
```
.
└── site
    ├── config.toml / config.yaml / config.json
    ├── content
    │   └── ...
    ├── layouts
    │   └── ...
    ├── themes
    │   └── ...
    ├── static
    │   └── ...
    ├── archetypes
    │   └── ...
    ├── data
    │   └── ...
    └── ...
```


## Get the Image
There are two ways to get the docker image. One is to pull it from docker hub, the other is to build it by yourself. 

### From Docker Hub
The compressed size of the image on Docker Hub is only 32MB. 
You can simply pull the latest image by:
```shell
$ docker pull orianna/hugo-docker-dev
```

Check the image, and this image is only 94.0MB now:
```shell
$ docker images
```

### Build the Image
If you have pulled the image from Docker Hub, you can skip this part.

Check `HUGO_VERSION` in the Dockfile compared to [Hugo](https://github.com/gohugoio/hugo). Modify `HUGO_VERSION` if it is not the latest version.

Go to the repo's root and open the terminal:
```shell
$ docker build -t your/image-name:your-tag -t your/image-name:latest .
```
`-t` tags the image and one image can be tagged several times.

`your/image-name` is formatted by docker hub. It is not the official image so you have to put your docker cloud name before the slash.

`.` means from this directory.

e.g.
```shell
$ docker build -t orianna/hugo-docker-dev:0.1 -t orianna/hugo-docker-dev:latest .
```

Check the image, and this image is only 94.0MB now:
```shell
$ docker images
```

## Executing
Run the docker container:
```shell
$ docker run --name container-name -v $(pwd)/your-site-path:/hugo-site -p 1313:1313 --rm your/image-name:your-tag 
```
`--name` defines the name of the container.

`-v` mounts the local directory to the docker.

`-p` defines the port mapping.

`--rm` means the container created by the command will be removed after the container is stopped.

e.g.
```shell
$ docker run --name my-hugo -v $(pwd)/site-sample:/hugo-site -p 1313:1313 --rm orianna/hugo-docker-dev:latest
```

Now you can check the sample at http://localhost:1313/!
